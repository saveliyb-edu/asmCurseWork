.model small
.stack 100h
.data
    buffer db 7 dup('$')   ; ????? ??? ?????? (6 ???????? + '$')
    ten dw 10              ; ????????? ??? ??????? ?? 10
.code
main proc
    mov ax, @data
    mov ds, ax

    ; ???????? ? ????? ?????
    ; ????? 1
    mov ax, 1
    call print_number

    ; ????? 12
    mov ax, 12
    call print_number

    ; ????? 1234
    mov ax, 1234
    call print_number

    ; ????? -4321
    mov ax, -4321
    call print_number

    ; ????? 0
    mov ax, 0
    call print_number

    ; ?????????? ?????????
    mov ax, 4C00h
    int 21h
main endp

print_number proc
    ; ????????? ????????? ?? ????? ??????
    lea di, buffer + 6       ; ????????? ?? ????? ?????? (????????? ?????? '$')

    ; ???????? ????? ?? ????
    cmp ax, 0
    jge convert_start        ; ???? ????? >= 0, ????????? ? ???????????

    ; ????????? ?????????????? ?????
    neg ax                   ; ?????? ????? ?????????????
    mov byte ptr [buffer], '-' ; ?????????? '-' ? ?????? ??????
    lea di, buffer + 6       ; ????? ????????????? ????????? ?? ?????
    dec di                   ; ??????? ????????? ????? ??? ?????? ????

convert_start:
    mov cx, 0                ; ??????? ????????

convert_loop:
    xor dx, dx               ; ??????? DX ????? ????????
    div ten                  ; AX / 10, ????????? ? AX, ??????? ? DX
    add dl, '0'              ; ??????????? ??????? ? ASCII-??????
    dec di                   ; ????????? ? ????????? ???????
    mov [di], dl             ; ????????? ?????? ? ?????
    inc cx                   ; ??????????? ??????? ????????
    cmp ax, 0                ; ?????????, ??? ?? ????? ??????????
    jne convert_loop         ; ???? ???, ??????????

    ; ??????????? ????????? ??? ?????? ??????
    lea dx, buffer + 6       ; ????????? ?? ????? ??????
    sub dx, cx               ; ??????? ????????? ? ?????? ????
    
    ; ???? ????? ?????????????, ???????? ???? '-'
    cmp word ptr [si], 0
    jge skip_minus
    lea dx, buffer           ; ????????? ?? ?????? ??????, ????? ???????? '-'

skip_minus:
    ; ????? ?????? ?? ?????
    mov ah, 09h
    int 21h

    ; ??????? ?????? ??? ?????????? ?????
    mov ah, 02h
    mov dl, 0Dh              ; ?????? ???????? ???????
    int 21h
    mov dl, 0Ah              ; ?????? ????? ??????
    int 21h

    ret
print_number endp
end main